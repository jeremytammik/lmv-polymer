<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="lmv-property-view" attributes="properties">
  <template>
    <link rel="stylesheet" href="lmv-property-view.css">

    <template repeat="{{cat in keys(categories)}}">
      <div class="category">{{cat}}</div>
      <table>
        <template repeat="{{prop in categories[cat]}}">
          <tr>
            <td class="prop">{{prop.displayName}}</td>
            <td class="prop">{{prop.displayValue}}</td>
          </tr>
        </template>
      </table>
    </template>

  </template>

  <script>
    (function () {
      Polymer({
        propertiesChanged: function(oldValue, newValue) {
          var props = newValue; // === this.properties;
          var name = props[0].displayValue;
          this.categories = {};
          for (var i=0; i<props.length; i++) {
            var cat = props[i].displayCategory || name;
            if (!this.categories[cat])
              this.categories[cat] = [];
            this.categories[cat].push(props[i]);
          }
        },
        keys: function(obj) {
          if (obj) return Object.keys(obj);
        }
      });
    })();
  </script>
</polymer-element>
